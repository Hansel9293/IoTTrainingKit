<!DOCTYPE HTML>

<html>
	<head>
		<title>PROJECT 6</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<style>
    .hidden {
        display: none; /* Initially hides the sections */
    }
    .toggle-button {
        display: inline-block;
        margin: 10px 0;
        padding: 0px 20px;
        background-color: transparent;
        color: #fff;
        border: none;
        cursor: pointer;
        border-radius: 5px;
    }
    .toggle-button:hover {
        background-color: #0056b3;
    }
    .section {
        padding: 10px;
        border: 1px solid #ddd;
        margin: 10px 0;
    }
</style>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo">Project<strong> 6</strong></a>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>Kitchen Monitoring</h1>
									</header>
                        <!-- Main Image (pic11.jpg) -->
                        <span class="image fit">
                            <a href="images/6.jpg" class="image-link"><img src="images/6.jpg" alt="" /></a>
                        </span>


                        <!-- Modal Dialog -->
                        <div id="modal" class="modal">
                            <span class="close">&times;</span>
                            <img class="modal-content" id="modal-image">
                        </div>

                        <!-- JavaScript to Show Full Image on Click -->
                        <script>
                            // Get all elements with class "image-link"
                            const imageLinks = document.querySelectorAll('.image-link');

                            // Get the modal element
                            const modal = document.getElementById('modal');

                            // Get the image element within the modal
                            const modalImg = document.getElementById('modal-image');

                            // Loop through each image link
                            imageLinks.forEach(link => {
                                link.addEventListener('click', function(event) {
                                    event.preventDefault(); // Prevent default link behavior

                                    // Get href attribute of the clicked link (full-size image URL)
                                    const imageURL = this.getAttribute('href');

                                    // Display the modal
                                    modal.style.display = 'flex'; // Show the modal as flexbox for centering

                                    // Set the clicked image as the source of the modal image
                                    modalImg.src = imageURL;

                                    // Reset modal content position
                                    modal.scrollTop = 0;
                                    modal.scrollLeft = 0;
                                });
                            });

                            // Close the modal when the close button (x) is clicked
                            const closeBtn = document.querySelector('.close');
                            closeBtn.addEventListener('click', function() {
                                modal.style.display = 'none';
                            });

                            // Close the modal when clicking outside of it
                            window.addEventListener('click', function(event) {
                                if (event.target === modal) {
                                    modal.style.display = 'none';
                                }
                            });

                            // Enable zoom functionality
                            modalImg.addEventListener('click', function() {
                                if (modalImg.classList.contains('zoomed')) {
                                    modalImg.classList.remove('zoomed');
                                } else {
                                    modalImg.classList.add('zoomed');
                                }
                            });
                        </script>
									<!-- Content -->
										<h2 id="content">HOW IT WORKS?</h2>
										<p>A kitchen monitoring system using gas sensor does monitor for any obnoxious gases such as methane, propane, carbon monoxide etc. The used sensor works in the manner that as soon as it comes in contact with the gas molecules, it alters its electrical characteristics, which in turn are detectable. Thus, when concentrations of gas become dangerous, the system emits audible or visual signals.
										</p>
										<h2 id="content">PARTS NEEDED:</h2>
										<p>• Main Board Module<br>
											• Smart Kitchen Module<br>
											• Connector Cable<br></p>

							<section>
								<header class="main">
									<h2 id="content">SENSOR IN THE MODULE TO BE USED</h2></header>
									<p><strong>MQ2 Gas Sensor</strong><br> This sensor swallows air and digest it in a way that makes it enabled to identify when certain gases are around. HAD a certain segment which switches on when it comes into contact with a particular kind of gases such as oxygen or carbon monoxide say. When this occurs the operation of the sensor changes way electricity passes through the sensor. This change is then quantified and the sensor then illuminates a signal of the intensity of the gas in the air.</p>
							</section>	

						<!-- Image Section -->
						<h2>THE BUILD</h2>

						<!-- Main Image (pic11.jpg) -->
						<span class="image fit">
						    <a href="images/sgas.jpg" class="image-link"><img src="images/sgas.jpg" alt="" /></a>
						</span>

						<!-- Modal Dialog -->
						<div id="modal" class="modal">
						    <span class="close">&times;</span>
						    <img class="modal-content" id="modal-image">
						</div>

						<!-- JavaScript to Show Full Image on Click -->
						<script>
						    // Get all elements with class "image-link"
						    const imageLinks = document.querySelectorAll('.image-link');

						    // Get the modal element
						    const modal = document.getElementById('modal');

						    // Get the image element within the modal
						    const modalImg = document.getElementById('modal-image');

						    // Loop through each image link
						    imageLinks.forEach(link => {
						        link.addEventListener('click', function(event) {
						            event.preventDefault(); // Prevent default link behavior

						            // Get href attribute of the clicked link (full-size image URL)
						            const imageURL = this.getAttribute('href');

						            // Display the modal
						            modal.style.display = 'flex'; // Show the modal as flexbox for centering

						            // Set the clicked image as the source of the modal image
						            modalImg.src = imageURL;

						            // Reset modal content position
						            modal.scrollTop = 0;
						            modal.scrollLeft = 0;
						        });
						    });

						    // Close the modal when the close button (x) is clicked
						    const closeBtn = document.querySelector('.close');
						    closeBtn.addEventListener('click', function() {
						        modal.style.display = 'none';
						    });

						    // Close the modal when clicking outside of it
						    window.addEventListener('click', function(event) {
						        if (event.target === modal) {
						            modal.style.display = 'none';
						        }
						    });

						    // Enable zoom functionality
						    modalImg.addEventListener('click', function() {
						        if (modalImg.classList.contains('zoomed')) {
						            modalImg.classList.remove('zoomed');
						        } else {
						            modalImg.classList.add('zoomed');
						        }
						    });
						</script>


<h2>CHOOSE WHAT PROJECT YOU WISH TO PERFORM"</h2>
<!-- Button for Set 1 -->
<button id="toggleSet1" class="toggle-button">Through the Internet</button>
<!-- Section 1 -->
<div id="set1" class="hidden">
    <div class="section">
        <h2>Instructions</h2>
<p><strong>Step 1: Assembling the System</strong><br>
<strong>Positioning the Module:</strong><br>
1. Take the Biometrics Module (enclosed in the 3D-printed box) and align it over the main board.<br>
2. Gently press the module onto the main board's connector pins until it fits securely in place.<br>   
3. Ensure that the module is correctly seated to avoid loose connections.<p>
<strong>Step 2: Powering the System</strong><br>
<strong>Connecting Power:</strong><br>
1. Get the connecting cable and attach it into the laptop that you will use to upload the code.<br>
2. Plug in the other end of it to the main board. The system will automatically power on.<br>
<strong>Visual Indicator Check:</strong><br>
Observe the LED indicators on the main board. The system should show a steady power LED to confirm it's operational.<p>
<strong>Step 3: Connecting to the Internet and Adafruit IO:</strong><br>
1. Copy the code in the website under "Through Internet" then change the WiFi SSID and password depending on what connection you wish to connect.
2. Open Adafruit IO in your search engine then use "denzelgaddi5@gmail.com" as email and "Denzel92934." as password.
3. Select Project 6 in the dashboard. <p>
<strong>Testing the Alerts:</strong><br>
To test the system, place you palm in front of the sensor. The alerts should activate.
                            </p>

<!-- Video Button -->
<button id="showVideoButton">Watch Video Instruction</button>

<!-- Video Modal -->
<div id="videoModal" class="modal">
    <span class="close" id="closeVideo">&times;</span>
    <div class="video-container">
        <video id="videoPlayer" controls>
            <source src="videos/vkitchen.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
</div>

<!-- CSS for Styling -->
<style>
    /* Video Button */
    #showVideoButton {
        display: block;
        margin: 20px auto;
        padding: 1px 5px;
        background-color: transparent;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        font-size: 12px;
    }

    /* Video Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
    }

    .video-container {
        width: 80%;
        max-width: 600px;
    }

    .close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 2rem;
        color: white;
        cursor: pointer;
    }

    video {
        width: 100%;
        height: auto;
        border: none;
    }
</style>

<!-- JavaScript for Modal Functionality -->
<script>
    // Get the elements
    const showVideoButton = document.getElementById("showVideoButton");
    const videoModal = document.getElementById("videoModal");
    const closeVideo = document.getElementById("closeVideo");
    const videoPlayer = document.getElementById("videoPlayer");

    // Show modal when button is clicked
    showVideoButton.addEventListener("click", function() {
        videoModal.style.display = "flex";
        videoPlayer.play(); // Auto-play video when modal is shown
    });

    // Close modal when the close button is clicked
    closeVideo.addEventListener("click", function() {
        videoModal.style.display = "none";
        videoPlayer.pause(); // Pause video when modal is closed
        videoPlayer.currentTime = 0; // Reset video to start
    });

    // Close modal when clicking outside the video
    window.addEventListener("click", function(event) {
        if (event.target === videoModal) {
            videoModal.style.display = "none";
            videoPlayer.pause(); // Pause video when modal is closed
            videoPlayer.currentTime = 0; // Reset video to start
        }
    });
</script>
    </div>
    <div class="section">
        <h2>Code</h2>
        <pre><code>
#include &lt;WiFi.h&gt;
#include "AdafruitIO_WiFi.h"

// Adafruit IO credentials
#define IO_USERNAME "IoTTrainingBoard"
#define IO_KEY "aio_lYXr89c05NCpeRgnLIeYJuSGcjby"

// WiFi credentials
#define WIFI_SSID "PLDTHOMEFIBR5e300"
#define WIFI_PASS "SASHuke@1123"

// Adafruit IO instance
AdafruitIO_WiFi io(IO_USERNAME, IO_KEY, WIFI_SSID, WIFI_PASS);

// Feeds for gas monitoring
AdafruitIO_Feed *gasLevelFeed = io.feed("gas_level");
AdafruitIO_Feed *gasStatusFeed = io.feed("gas_status");

// MQ2 Gas Sensor Pin
const int gasSensorPin = 34;  // Analog pin connected to the MQ2 sensor

float gasLevel;
String gasStatus;

// Function to read the gas level from the MQ2 sensor and determine the status
void readGasLevel() {
  gasLevel = analogRead(gasSensorPin);  // Read the analog value from the sensor
  if (gasLevel &lt;= 200) {
    gasStatus = "Normal";
  } else if (gasLevel &gt; 200 &amp;&amp; gasLevel &lt;= 400) {
    gasStatus = "Moderate - Not that normal";
  } else {
    gasStatus = "Dangerous";
  }
}

void setup() {
  Serial.begin(115200);
  pinMode(gasSensorPin, INPUT);

  // Connect to Adafruit IO
  Serial.print("Connecting to Adafruit IO...");
  io.connect();

  // Wait for connection
  while (io.status() &lt; AIO_CONNECTED) {
    Serial.print(".");
    delay(500);
  }
  Serial.println("Connected!");

  // Initialize feeds with initial values
  gasLevelFeed-&gt;save(0.00);        // Initialize gas level
  gasStatusFeed-&gt;save("Normal");  // Initialize gas status
}

void loop() {
  io.run();       // Keep Adafruit IO connection alive
  readGasLevel(); // Read the gas level from the sensor

  // Publish gas level and status to Adafruit IO
  gasLevelFeed-&gt;save(gasLevel);
  gasStatusFeed-&gt;save(gasStatus);

  // Debugging output
  Serial.print("Gas Level: ");
  Serial.print(gasLevel);
  Serial.print(" | Status: ");
  Serial.println(gasStatus);

  delay(1000); // Update every second
}


</code></pre><button id="copyButton">Copy Code</button>
    </div>
    <div class="section">
        <h2>Code Explanation</h2>        
    <p>The code sets up a Kitchen Monitoring System using an MQ2 Gas Sensor and an ESP32, creating an independent network (Access Point) for users to view real-time gas levels on a web page. Let's break it down.
    <p><strong>Key Components and Their Roles</strong><br>
<strong>1. Libraries Included:</strong><br>
&emsp;&emsp;&emsp;•<strong><code>WiFi.h</code></strong>Handles Wi-Fi connectivity for the ESP32.<br>
&emsp;&emsp;&emsp;•<strong><code>AdafruitIO_WiFi.h</code></strong>Integrates the ESP32 with Adafruit IO for data feeds and connectivity.<br>
<strong>2. WiFi Setup:</strong><br>
&emsp;&emsp;&emsp;• Configures the ESP32 to connect to a Wi-Fi network using SSID <code>PLDTHOMEFIBR5e300</code> and password <code>SASHuke@1123</code>.<br>
&emsp;&emsp;&emsp;• Establishes an Adafruit IO instance using the username <code>Hanseljedd</code> and key <code>aio_lYXr89c05NCpeRgnLIeYJuSGcjby</code>.<p>

<strong>3. MQ2 Gas Sensor Setup:</strong><br>
&emsp;&emsp;&emsp;• The MQ2 gas sensor is connected to analog pin GPIO 34 to monitor gas levels.<br>
&emsp;&emsp;&emsp;• The sensor outputs an analog signal proportional to the gas concentration, which is read by the ESP32.<br>
&emsp;&emsp;&emsp;• Gas levels are categorized into three statuses:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Normal</code></strong> for values ≤ 200.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Moderate</code></strong> for values &gt; 200 and ≤ 400.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Dangerous</code></strong> for values &gt; 400.<p>
	
<div class="button-container">
    <!-- Button to show first image -->
    <button id="showImageButton1" class="show-image-button">MQ2 Pinout</button>

    <!-- Button to show second image -->
    <button id="showImageButton2" class="show-image-button">ESP32 Pinout</button>
</div>

<!-- Hidden first image container -->
<div id="imageContainer1" class="hidden">
    <img src="images/mq2.jpg"alt="MQ2 Sensor Image" style="max-width: 100%; height: auto;"><br> 
    Photo Credit: Last Minute Engineers<p>
</div>

<!-- Hidden second image container -->
<div id="imageContainer2" class="hidden">
    <img src="images/esp32.jpg" alt="ESP32 Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Random Nerd Tutorials<p>
</div>

<!-- JavaScript to handle button clicks for each image -->
<script>
    const showImageButton1 = document.getElementById("showImageButton1");
    const imageContainer1 = document.getElementById("imageContainer1");

    const showImageButton2 = document.getElementById("showImageButton2");
    const imageContainer2 = document.getElementById("imageContainer2");

    // Toggle first image visibility
    showImageButton1.addEventListener("click", function() {
        imageContainer1.classList.toggle("hidden");
    });

    // Toggle second image visibility
    showImageButton2.addEventListener("click", function() {
        imageContainer2.classList.toggle("hidden");
    });
</script>

<!-- CSS for styling -->
<style>
    /* Center the button container */
    .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-top: 10px;
    }

    /* Style for buttons */
    .show-image-button {
        padding: 5px 10px;
        background-color: transparent;
        color: #7f888f;
        border: 2px solid #FF6F61;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 30px;
        transition: background-color 0.3s, color 0.3s;
    }

    /* Center text inside the button */
    .show-image-button:hover {
        background-color: rgba(255, 255, 255, 0.2);
        color: #00ab41;
    }

    /* Hide initially */
    .hidden {
        display: none;
    }

    /* Margin for image containers */
    #imageContainer1, #imageContainer2 {
        margin-top: 10px;
    }
</style><p>

<strong>4. Server Functions:</strong><br>
&emsp;&emsp;&emsp;• Key server functions include:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>readGasLevel()</code></strong>Reads the gas concentration from the MQ2 sensor and determines the gas status.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>gasLevelFeed</code></strong>Publishes the raw gas level readings to Adafruit IO.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>gasStatusFeed</code></strong>Publishes the gas status ("Normal," "Moderate," or "Dangerous") to Adafruit IO.<p>

<strong>5. Data Collection and Management:</strong><br> 
&emsp;&emsp;&emsp;• The<strong><code>readGasLevel()</code></strong>function evaluates the analog signal from the gas sensor to determine the gas concentration.<br>
&emsp;&emsp;&emsp;• Status thresholds ensure that the system classifies gas levels appropriately for real-time monitoring.<br>
&emsp;&emsp;&emsp;• Data is sent to Adafruit IO feeds for monitoring via the web interface.<p>

<strong>6. Web Interface Design:</strong><br> 
&emsp;&emsp;&emsp;• Adafruit IO serves as the web interface for displaying gas levels and their corresponding statuses.<br> 
&emsp;&emsp;&emsp;• Users can monitor real-time updates on gas concentration and safety levels remotely.<p>

<strong>7. JavaScript and AJAX Updates:</strong><br> 
&emsp;&emsp;&emsp;• Adafruit IO provides real-time updates for the gas level and status, ensuring users can view changes dynamically.<br> 
&emsp;&emsp;&emsp;• Users can access the data through Adafruit IO dashboards.<p>

<strong>8. The Setup<code>setup()</code>and Loop<code>loop()</code>Functions:</strong><br> 
&emsp;&emsp;&emsp;•<strong><code>setup()</code></strong>Initializes the gas sensor, connects to Adafruit IO, and initializes feeds with default values.<br> 
&emsp;&emsp;&emsp;•<strong><code>loop()</code></strong>Reads gas levels, updates Adafruit IO feeds, and prints debug information to the Serial Monitor.<p>
    </div>
</div>


<!-- Button for Set 2 -->
<button id="toggleSet2" class="toggle-button">WiFi Direct</button>
<!-- Section 2 -->
<div id="set2" class="hidden">
    <div class="section">
                            <p><strong>Step 1: Assembling the System</strong><br>
<strong>Positioning the Module:</strong><br>
1. Take the Smart Kitchen Module (enclosed in the 3D-printed box) and align it over the main board.<br>
2. Gently press the module onto the main board's connector pins until it fits securely in place.<br>   
3. Ensure that the module is correctly seated to avoid loose connections.<p>
<strong>Step 2: Powering the System</strong><br>
<strong>Connecting Power:</strong><br>
1. Get the connecting cable and attach it into the laptop that you will use to upload the code.<br>
2. Plug in the other end of it to the main board. The system will automatically power on.<br>
<strong>Visual Indicator Check:</strong><br>
Observe the LED indicators on the main board. The system should show a steady power LED to confirm it's operational.<p>
<strong>Step 3: Connecting to Web Server:</strong><br>
1. Once the serial monitor says "Code Uploaded", open the serial monitor of the Arduino IDE then press the <strong>EN</strong> button to show the IP address.<br>
2. Open your WiFi and look for <strong>ESP32_GasSensor</strong>. Choose that option and enter password <strong>12345678</strong><be>.
3. Enter the IP address in a search engine <strong>192.168.4.1</strong>. <p>
<strong>Step 4: Monitoring and Alerts</strong><br>
<strong>Understanding the Alerts:</strong><br>
1. The system is equipped with a visual (web server) alert.<br>
2. When gas levels are safe, the background color of the website remains green. If gas levels rise above the threshold, the background changes to red, and the container inside it will prompt dangerous levels of gas detected in the area.<p>
<strong>Testing the Alerts:</strong><br>
To test the system, simulate the presence of gas (e.g., using a gas lighter without ignition or alcohol) near the sensor. The alerts should activate. 
                            </p>


<!-- Video Button -->
<button id="showVideoButton">Watch Video Instruction</button>

<!-- Video Modal -->
<div id="videoModal" class="modal">
    <span class="close" id="closeVideo">&times;</span>
    <div class="video-container">
        <video id="videoPlayer" controls>
            <source src="videos/kitchen.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
</div>

<!-- CSS for Styling -->
<style>
    /* Video Button */
    #showVideoButton {
        display: block;
        margin: 20px auto;
        padding: 1px 5px;
        background-color: transparent;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        font-size: 12px;
    }

    /* Video Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
    }

    .video-container {
        width: 80%;
        max-width: 600px;
    }

    .close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 2rem;
        color: white;
        cursor: pointer;
    }

    video {
        width: 100%;
        height: auto;
        border: none;
    }
</style>

<!-- JavaScript for Modal Functionality -->
<script>
    // Get the elements
    const showVideoButton = document.getElementById("showVideoButton");
    const videoModal = document.getElementById("videoModal");
    const closeVideo = document.getElementById("closeVideo");
    const videoPlayer = document.getElementById("videoPlayer");

    // Show modal when button is clicked
    showVideoButton.addEventListener("click", function() {
        videoModal.style.display = "flex";
        videoPlayer.play(); // Auto-play video when modal is shown
    });

    // Close modal when the close button is clicked
    closeVideo.addEventListener("click", function() {
        videoModal.style.display = "none";
        videoPlayer.pause(); // Pause video when modal is closed
        videoPlayer.currentTime = 0; // Reset video to start
    });

    // Close modal when clicking outside the video
    window.addEventListener("click", function(event) {
        if (event.target === videoModal) {
            videoModal.style.display = "none";
            videoPlayer.pause(); // Pause video when modal is closed
            videoPlayer.currentTime = 0; // Reset video to start
        }
    });
</script>

    </div>
    <div class="section">
        <h2>Code</h2>
        <pre><code>
#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;

// Define the Access Point credentials
const char* ssid = "ESP32_GasSensor";
const char* password = "12345678";

// Define Static IP Address
IPAddress local_IP(192, 168, 4, 1);
IPAddress gateway(192, 168, 4, 1);
IPAddress subnet(255, 255, 255, 0);

// MQ2 Gas Sensor Pin
const int gasSensorPin = 34;  // Analog pin connected to the MQ2 sensor

WebServer server(80); // Create a web server on port 80

float gasLevel;
String gasStatus;

// Function to read the gas level from the MQ2 sensor and determine the status
void readGasLevel() {
  gasLevel = analogRead(gasSensorPin);  // Read the analog value from the sensor
  if (gasLevel &lt;= 200) {
    gasStatus = "Normal";
  } else if (gasLevel &gt; 200 &amp;&amp; gasLevel &lt;= 400) {
    gasStatus = "Moderate - Not that normal";
  } else {
    gasStatus = "Dangerous";
  }
}

// Serve the web page
void handleRoot() {
  String html = "&lt;html&gt;&lt;head&gt;&lt;title&gt;Gas Sensor Monitor&lt;/title&gt;";
  html += "&lt;meta name='viewport' content='width=device-width, initial-scale=1'&gt;";
  html += "&lt;style&gt;";
  html += "body { font-family: Arial, sans-serif; text-align: center; background: radial-gradient(circle, white, #00ab41); color: white; height: 100vh; display: flex; justify-content: center; align-items: center; margin: 0; }";
  html += ".container { width: 90%; max-width: 400px; background-color: white; padding: 20px; border-radius: 15px; box-shadow: 0 20px 40px 20px rgba(0, 0, 0, 0.3); text-align: center; }";
  html += "h1 { font-size: 2.5rem; color: black; margin-bottom: 20px; }";
  html += ".status-bar { background-color: #00ab41; padding: 10px; border-radius: 10px; font-size: 1.2rem; margin-top: 20px; }";
  html += ".alert-message { font-size: 1.5rem; color: #ff3333; font-weight: bold; margin-top: 10px; }";
  html += "&lt;/style&gt;";
  
  html += "&lt;script&gt;";
  html += "setInterval(function() {";
  html += "fetch('/gas').then(function(response) {";
  html += "return response.json();";
  html += "}).then(function(data) {";
  html += "document.querySelector('#gasLevel').innerText = data.gasLevel.toFixed(2);";
  html += "document.querySelector('#gasStatus').innerText = data.gasStatus;";
  html += "});";
  html += "}, 1000);";
  html += "&lt;/script&gt;&lt;/head&gt;&lt;body&gt;";
  
  html += "&lt;div class='container'&gt;";
  html += "&lt;h1&gt;Gas Sensor Monitor&lt;/h1&gt;";
  html += "&lt;div class='status-bar'&gt;";
  html += "&lt;p&gt;Current Gas Level: &lt;span id='gasLevel'&gt;0.00&lt;/span&gt;&lt;/p&gt;";
  html += "&lt;p&gt;Status: &lt;span id='gasStatus'&gt;Normal&lt;/span&gt;&lt;/p&gt;";
  html += "&lt;/div&gt;";
  html += "&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;";
  server.send(200, "text/html", html);
}

void handleGasLevel() {
  readGasLevel();
  String json = "{ \"gasLevel\": " + String(gasLevel, 2) + ", \"gasStatus\": \"" + gasStatus + "\" }";
  server.send(200, "application/json", json);
}

void setup() {
  Serial.begin(115200);
  pinMode(gasSensorPin, INPUT);
  WiFi.softAPConfig(local_IP, gateway, subnet);
  WiFi.softAP(ssid, password);
  server.on("/", handleRoot);
  server.on("/gas", handleGasLevel);
  server.begin();
}

void loop() {
  server.handleClient();
}
        </code></pre><button id="copyButton">Copy Code</button>
    </div>

    <div class="section"><h2>Code Explanation</h2><p>
    <p>The code sets up a Kitchen Monitoring System using an MQ2 Gas Sensor and an ESP32, creating an independent network (Access Point) for users to view real-time gas levels on a web page. Let's break it down.
    <p><strong>Key Components and Their Roles</strong><br>
<strong>1. Libraries Included:</strong><br>
&emsp;&emsp;&emsp;•<strong><code>WiFi.h</code></strong> Executes Wi-Fi related activities, thus enabling the ESP32 to configure the formation of an Access Point for use by a user.<br>
<strong>2. WiFi Setup</strong><br>
&emsp;&emsp;&emsp;• By inserting the ESP32, an Access Point is configured with the Service Set Identifier (SSID) ESP32_Soil_Moisture and the password 12345678.<br>
&emsp;&emsp;&emsp;• The ESP32 configures a static IP address for easy connection to the control interface by users.<p>
<strong>3. MQ2 Gas Sensor Setup:</strong><br>
&emsp;&emsp;&emsp;• The MQ2 Gas Sensor is connected to pin 34 of the ESP32, where it detects gas levels.<br>

<div class="button-container">
    <!-- Button to show first image -->
    <button id="showImageButton1" class="show-image-button">MQ2 Pinout</button>

    <!-- Button to show second image -->
    <button id="showImageButton2" class="show-image-button">ESP32 Pinout</button>
</div>

<!-- Hidden first image container -->
<div id="imageContainer1" class="hidden">
    <img src="images/mq2.jpg"alt="MQ2 Sensor Image" style="max-width: 100%; height: auto;"><br> 
    Photo Credit: Last Minute Engineers<p>
</div>

<!-- Hidden second image container -->
<div id="imageContainer2" class="hidden">
    <img src="images/esp32.jpg" alt="ESP32 Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Random Nerd Tutorials<p>
</div>

<!-- JavaScript to handle button clicks for each image -->
<script>
    const showImageButton1 = document.getElementById("showImageButton1");
    const imageContainer1 = document.getElementById("imageContainer1");

    const showImageButton2 = document.getElementById("showImageButton2");
    const imageContainer2 = document.getElementById("imageContainer2");

    // Toggle first image visibility
    showImageButton1.addEventListener("click", function() {
        imageContainer1.classList.toggle("hidden");
    });

    // Toggle second image visibility
    showImageButton2.addEventListener("click", function() {
        imageContainer2.classList.toggle("hidden");
    });
</script>

<!-- CSS for styling -->
<style>
    /* Center the button container */
    .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-top: 10px;
    }

    /* Style for buttons */
    .show-image-button {
        padding: 5px 10px;
        background-color: transparent;
        color: #7f888f;
        border: 2px solid #FF6F61;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 30px;
        transition: background-color 0.3s, color 0.3s;
    }

    /* Center text inside the button */
    .show-image-button:hover {
        background-color: rgba(255, 255, 255, 0.2);
        color: #00ab41;
    }

    /* Hide initially */
    .hidden {
        display: none;
    }

    /* Margin for image containers */
    #imageContainer1, #imageContainer2 {
        margin-top: 10px;
    }
</style><p>

<strong>4. Server Functions:</strong><br>
&emsp;&emsp;&emsp;• The ESP32 in this design operates a web server running on port 80 <strong><code>(WebServer server(80);)</code></strong>.
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;There are two main server functions:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;• <strong><code>handleRoot()</code></strong> Shows the home page updated with current gas concentrations.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;• <strong><code>handleGasLevel()</code></strong> Speaks JSON format data in real-time which helps the web page to refresh without the use of the reload button.<p>

<strong>5. Data Collection with<code>readGasLevel()</code>:</strong><br> 
&emsp;&emsp;&emsp;• The <strong><code>readGasLevel()</code></strong>function acquires values from the sensor and sets values to the gas level and a label of “Normal”, “Moderate – Not that normal”, or “Dangerous”.<p>

<strong>6. Web Interface Design:</strong><br> 
&emsp;&emsp;&emsp;• It is HTML and CSS based with additional CSS used to make the display in the middle of the browser much more presentable.<br> 
&emsp;&emsp;&emsp;• The<strong><code>container</code></strong>formats a card-like box of the name that reveals the sensor data.<br> 
&emsp;&emsp;&emsp;• The<strong><code>status-bar</code></strong>highlights real-time conditions: gas level and status.<p>

<strong>7. JavaScript and AJAX Updates:</strong><br> 
&emsp;&emsp;&emsp;• The<strong><code>setInterval()</code></strong>JavaScript function retrieves data each second from the<strong><code>/gas</code></strong>API endpoint, to make sure the displayed values are constantly current.<br> 
&emsp;&emsp;&emsp;• It helps to make the necessary changes on the fly, without having to refresh the page and thus improves user experience.<p>

<strong>8. The Setup<code>setup()</code>and Loop<code>loop()</code>Functions:</strong><br> 
&emsp;&emsp;&emsp;• <strong><code>setup()</code></strong>It awakens the sensor, then start the Access Point, and sets up the web server.<br> 
&emsp;&emsp;&emsp;• <strong><code>loop()</code></strong>Pays attention to new client request to update the displayed data on the webpage.<p>



<script>
    // Toggle visibility for Set 1
    const toggleSet1 = document.getElementById('toggleSet1');
    const set1 = document.getElementById('set1');
    toggleSet1.addEventListener('click', () => {
        set1.classList.toggle('hidden'); // Toggles the "hidden" class
    });

    // Toggle visibility for Set 2
    const toggleSet2 = document.getElementById('toggleSet2');
    const set2 = document.getElementById('set2');
    toggleSet2.addEventListener('click', () => {
        set2.classList.toggle('hidden'); // Toggles the "hidden" class
    });
</script>

    </div><p>
</div>

<h2>ASSESSMENT</h2>
<div class="box">
In this section, students are required to accomplish the following activity.<p><p>
<strong>Project Description</strong><br>
You will enhance the existing gas sensor web server by adding a color-changing indicator to the web interface. The color will change depending on the gas level status:<br>
&emsp;&emsp;&emsp;- Green for normal gas levels<br>
&emsp;&emsp;&emsp;- Yellow for moderate gas levels<br>
&emsp;&emsp;&emsp;- Red for dangerous gas levels<p>
<strong>What to Expect</strong><br>
&emsp;&emsp;&emsp;- The ESP32 will create a WiFi network and allow you to access the web page displaying the current gas level.<br>
&emsp;&emsp;&emsp;- Based on the gas level reading, the background color or status indicator on the webpage will dynamically change:<br>
&emsp;&emsp;&emsp;- Green for a normal level (gas level <= 200).<br>
&emsp;&emsp;&emsp;- Yellow for a moderate level (gas level between 201 and 400).<br>
&emsp;&emsp;&emsp;- Red for a dangerous level (gas level > 400).<p>

	<button id="key" class="toggle-button">Answer Key</button>
<!-- Section 1 -->
<div id="answerkey" class="hidden">

    <div class="section">
        <h2>Code</h2>
        <pre><code>
#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;

// Define the Access Point credentials
const char* ssid = "ESP32_GasSensor";
const char* password = "12345678";

// Define Static IP Address
IPAddress local_IP(192, 168, 4, 1);
IPAddress gateway(192, 168, 4, 1);
IPAddress subnet(255, 255, 255, 0);

// MQ2 Gas Sensor Pin
const int gasSensorPin = 34;  // Analog pin connected to the MQ2 sensor

WebServer server(80); // Create a web server on port 80

float gasLevel;
String gasStatus;
String statusColor;  // New variable for color change

// Function to read the gas level from the MQ2 sensor and determine the status
void readGasLevel() {
  gasLevel = analogRead(gasSensorPin);  // Read the analog value from the sensor
  if (gasLevel &lt;= 200) {
    gasStatus = "Normal";
    statusColor = "#4CAF50"; // Green
  } else if (gasLevel &gt; 200 &amp;&amp; gasLevel &lt;= 400) {
    gasStatus = "Moderate - Not that normal";
    statusColor = "#FFEB3B"; // Yellow
  } else {
    gasStatus = "Dangerous";
    statusColor = "#F44336"; // Red
  }
}

// Serve the web page
void handleRoot() {
  String html = "&lt;html&gt;&lt;head&gt;&lt;title&gt;Gas Sensor Monitor&lt;/title&gt;";
  html += "&lt;meta name='viewport' content='width=device-width, initial-scale=1'&gt;";
  html += "&lt;style&gt;";
  html += "body { font-family: Arial, sans-serif; text-align: center; background: radial-gradient(circle, white, #00ab41); color: white; height: 100vh; display: flex; justify-content: center; align-items: center; margin: 0; }";
  html += ".container { width: 90%; max-width: 400px; background-color: white; padding: 20px; border-radius: 15px; box-shadow: 0 20px 40px 20px rgba(0, 0, 0, 0.3); text-align: center; }";
  html += "h1 { font-size: 2.5rem; color: black; margin-bottom: 20px; }";
  html += ".status-bar { background-color: #00ab41; padding: 10px; border-radius: 10px; font-size: 1.2rem; margin-top: 20px; }";
  html += ".alert-message { font-size: 1.5rem; color: #ff3333; font-weight: bold; margin-top: 10px; }";
  html += "&lt;/style&gt;";
  
  html += "&lt;script&gt;";
  html += "setInterval(function() {";
  html += "fetch('/gas').then(function(response) {";
  html += "return response.json();";
  html += "}).then(function(data) {";
  html += "document.querySelector('#gasLevel').innerText = data.gasLevel.toFixed(2);";
  html += "document.querySelector('#gasStatus').innerText = data.gasStatus;";
  html += "document.querySelector('#statusIndicator').style.backgroundColor = data.statusColor;";
  html += "});";
  html += "}, 1000);";
  html += "&lt;/script&gt;&lt;/head&gt;&lt;body&gt;";
  
  html += "&lt;div class='container'&gt;";
  html += "&lt;h1&gt;Gas Sensor Monitor&lt;/h1&gt;";
  html += "&lt;div id='statusIndicator' class='status-bar' style='background-color: #4CAF50;'&gt;"; // Default to green
  html += "&lt;p&gt;Current Gas Level: &lt;span id='gasLevel'&gt;0.00&lt;/span&gt;&lt;/p&gt;";
  html += "&lt;p&gt;Status: &lt;span id='gasStatus'&gt;Normal&lt;/span&gt;&lt;/p&gt;";
  html += "&lt;/div&gt;";
  html += "&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;";
  
  server.send(200, "text/html", html);
}

void handleGasLevel() {
  readGasLevel();
  String json = "{ \"gasLevel\": " + String(gasLevel, 2) + ", \"gasStatus\": \"" + gasStatus + "\", \"statusColor\": \"" + statusColor + "\" }";
  server.send(200, "application/json", json);
}

void setup() {
  Serial.begin(115200);
  pinMode(gasSensorPin, INPUT);
  WiFi.softAPConfig(local_IP, gateway, subnet);
  WiFi.softAP(ssid, password);
  server.on("/", handleRoot);
  server.on("/gas", handleGasLevel);
  server.begin();
}

void loop() {
  server.handleClient();
}


        </code></pre></div></div></div>
<script>
    // Toggle visibility for Answer Key
    const key = document.getElementById('key');
    const answerkey = document.getElementById('answerkey');
    key.addEventListener('click', () => {
        answerkey.classList.toggle('hidden'); // Toggles the "hidden" class
    });
</script>


											</div>
										</div>

								</section>

<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="index.html">Homepage</a></li>
										<li><a href="generic.html">The Creation</a></li>
										<li><a href="elements.html">Module Explainer</a></li>
										<li>
											<span class="opener">Introductory Projects</span>
											<ul>
												<li><a href="io.html">Input Output</a></li>
												<li><a href="ai.html">Analog Inputs</a></li>
												<li><a href="pwm.html">PWM (Analog Output)</a></li>
												<li><a href="sws.html">Switch Web Server</a></li>
												<li><a href="rlws.html">RGB LED Web Server</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Main Projects</span>
											<ul>
												<li><a href="project-1.html">Project 1</a></li>
												<li><a href="project-2.html">Project 2</a></li>
												<li><a href="project-3.html">Project 3</a></li>
												<li><a href="project-4.html">Project 4</a></li>
												<li><a href="project-5.html">Project 5</a></li>
												<li><a href="project-6.html">Project 6</a></li>
												<li><a href="project-7.html">Project 7</a></li>
												<li><a href="project-8.html">Project 8</a></li>
												<li><a href="project-9.html">Project 9</a></li>
												<li><a href="project-10.html">Project 10</a></li>
											</ul>
										</li>
									</ul>
								</nav>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>ADVANCED IOT PROJECTS</h2>
									</header>
									<div class="mini-posts">
										<article>
											<a href="https://youtu.be/RUO44kqNP24?si=QO3qiHGQLvJSXDaD" class="image"><img src="https://i.ytimg.com/vi/RUO44kqNP24/hqdefault.jpg?sqp=-oaymwEXCNACELwBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLD_wUN6wdxf151rPD6UWSKlwhLK7Q" alt="" /></a>
											<p>Patient Health Monitoring System Using Raspberry Pi</p>
										</article>
										<article>
											<a href="https://youtu.be/FSqYyjZtH4g?si=9BeVl6KnJ2oD9eBl" class="image"><img src="https://i.ytimg.com/vi/FSqYyjZtH4g/hqdefault.jpg?sqp=-oaymwEbCKgBEF5IVfKriqkDDggBFQAAiEIYAXABwAEG&rs=AOn4CLCztyDAtqgoFMqVVEyold-aKebbbQ" alt="" /></a>
											<p>Women Safety Device Using Internet of Things</p>
										</article>
										<article>
											<a href="https://youtu.be/EamYfGG4Wvg?si=10C8m2DArmPMSOv3" class="image"><img src="https://i.ytimg.com/vi/EamYfGG4Wvg/hqdefault.jpg?sqp=-oaymwE1CKgBEF5IVfKriqkDKAgBFQAAiEIYAXABwAEG8AEB-AH0CYAC0AWKAgwIABABGGUgTShIMA8=&rs=AOn4CLBlZoYwXKvvyn9fsfvRhCCsItaQ3g" alt="" /></a>
											<p>A Web-Based Accident Reporting and Tracking System</p>
										</article>
									</div>
									<ul class="actions">
										<li><a href="https://youtube.com/playlist?list=PL87CgTAGz2yZ0geJ-_9HAK2u8NDMhVwFH&si=cr7ljhFT1B8GZR3-" class="button">More</a></li>
									</ul>
								</section>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>Get in touch</h2>
									</header>
									<ul class="contact">
										<li class="icon solid fa-envelope"><a href="https://sscr.edu/Beta/">https://sscr.edu/Beta/</a></li>
										<li class="icon solid fa-phone">(046) 431-9405</li>
										<li class="icon solid fa-home">Manila-Cavite Road, Sta. Cruz,<br />
										Cavite City, 4100, Philippines</li>
									</ul>
								</section>

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; SSC-RdC IOT Development Board. <br>All rights reserved.
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/copy.js"></script>

	</body>
</html>
