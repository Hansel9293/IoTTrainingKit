<!DOCTYPE HTML>

<html>
	<head>
		<title>PROJECT 8</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo">Project<strong> 8</strong></a>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>Soil Moisture Monitoring</h1>
									</header>

									<!-- Content -->
										<h2 id="content">HOW IT WORKS?</h2>
										<p>Soil moisture monitoring involves using sensors to measure the amount of moisture present in the soil, which is crucial for ensuring optimal conditions for plant growth and effective water management. The sensor is installed in the ground at root level and can vary in type, such as resistive, capacitive, or time-domain reflectometry sensors. These device measure soil moisture by detecting electrical properties; for instance, resistive sensors assess the resistance between two electrodes, where wetter soil conducts electricity better, resulting in lower resistance, while drier soil has higher resistance. Once the sensor collects moisture data, it transmits this information to a microcontroller or monitoring system, either through wired connections or wirelessly. The microcontroller processes the data to determine the moisture level, often converting it into a readable format such as percentage moisture content.



											
										</p>
										<h2 id="content">PARTS NEEDED:</h2>
										<p>• Main Board Module<br>
											• Smart Agriculture Module<br>
											• Connector Cables<br></p>

							<section>
								<header class="main">
									<h2 id="content">SENSOR IN THE MODULE TO BE USED</h2></header>
									<p><strong>HL-69 Moisture Sensor</strong><br> The prongs of HL-69 Moisture Sensor measures the moisture level in the soil by passing an electric current through it and gauging the resistance. Moist soil allows electricity to flow more easily, resulting in lower resistance, whereas dry soil, which conducts electricity poorly, has higher resistance. <br> <br> 
									If the soil is wet, it conducts electricity better because water increases conductivity, resulting in lower resistance. Conversely, if the soil is dry, it conducts electricity poorly, leading to higher resistance. This data is then sent to a microcontroller, like an Arduino, which interprets the resistance levels to determine the moisture content of the soil. Based on the readings, the system can trigger actions like watering plants when the soil is too dry.</p>
							</section>

						<!-- Image Section -->
						<h2>THE BUILD</h2>

						<!-- Main Image (pic11.jpg) -->
						<span class="image fit">
						    <a href="images/ssoil.jpg" class="image-link"><img src="images/ssoil.jpg" alt="" /></a>
						</span>

						<!-- Modal Dialog -->
						<div id="modal" class="modal">
						    <span class="close">&times;</span>
						    <img class="modal-content" id="modal-image">
						</div>

						<!-- JavaScript to Show Full Image on Click -->
						<script>
						    // Get all elements with class "image-link"
						    const imageLinks = document.querySelectorAll('.image-link');

						    // Get the modal element
						    const modal = document.getElementById('modal');

						    // Get the image element within the modal
						    const modalImg = document.getElementById('modal-image');

						    // Loop through each image link
						    imageLinks.forEach(link => {
						        link.addEventListener('click', function(event) {
						            event.preventDefault(); // Prevent default link behavior

						            // Get href attribute of the clicked link (full-size image URL)
						            const imageURL = this.getAttribute('href');

						            // Display the modal
						            modal.style.display = 'flex'; // Show the modal as flexbox for centering

						            // Set the clicked image as the source of the modal image
						            modalImg.src = imageURL;

						            // Reset modal content position
						            modal.scrollTop = 0;
						            modal.scrollLeft = 0;
						        });
						    });

						    // Close the modal when the close button (x) is clicked
						    const closeBtn = document.querySelector('.close');
						    closeBtn.addEventListener('click', function() {
						        modal.style.display = 'none';
						    });

						    // Close the modal when clicking outside of it
						    window.addEventListener('click', function(event) {
						        if (event.target === modal) {
						            modal.style.display = 'none';
						        }
						    });

						    // Enable zoom functionality
						    modalImg.addEventListener('click', function() {
						        if (modalImg.classList.contains('zoomed')) {
						            modalImg.classList.remove('zoomed');
						        } else {
						            modalImg.classList.add('zoomed');
						        }
						    });
						</script>


												<!-- Box -->
<!-- Box -->
										<h2>INSTRUCTION(s):</h2>
													<div class="box">
														<p><strong>Step 1: Assembling the System</strong><br>
<strong>Positioning the Module:</strong><br>
1. Take the Smart Agriculture Module (enclosed in the 3D-printed box) and align it over the main board.<br>
2. Gently press the module onto the main board's connector pins until it fits securely in place.<br>
3. Ensure that the module is correctly seated to avoid loose connections.<p>

<strong>Step 2: Powering the System</strong><br>
<strong>Connecting Power:</strong><br>
1. Get the connecting cable and attach it to the laptop you will use to upload the code.<br>
2. Plug in the other end to the main board. The system will automatically power on.<br>
<strong>Visual Indicator Check:</strong><br>
Observe the LED indicators on the main board. A steady power LED confirms that the system is operational.<p>

<strong>Step 3: Connecting to Web Server:</strong><br>
1. After uploading the code, open the serial monitor in the Arduino IDE and press the <strong>EN</strong> button to display the IP address.<br>
2. Turn on your WiFi and look for <strong>ESP32_Soil_Moisture</strong>. Select it and enter <strong>12345678</strong> as the password.<br>
3. Open your web browser and type the IP address shown in the serial monitor, usually <strong>192.168.4.1</strong>.<p>

<strong>Step 4: Monitoring and Alerts</strong><br>
<strong>Understanding the Alerts:</strong><br>
1. The system includes a web server that displays soil moisture levels in real-time.<br>
2. When the soil moisture reading is high (sensor value above 4000), it will display "Dry Soil." For moderate levels (sensor value between 2500 and 4000), it shows "Moist Soil," and for low levels (below 2500), it indicates "Wet Soil." The moisture status appears below the numerical sensor reading.<p>

<strong>Testing the Alerts:</strong><br>
To test the system, place the sensor in various moisture conditions (dry soil, wet soil, etc.) to observe the corresponding alerts on the web interface.

														</p>
													</div>

							<!-- Preformatted Code -->
<html>
<head>
    <title>ESP32 Project</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif;}
        .code-section { background-color: #f5f5f5;}
        pre { white-space: pre-wrap; font-size: 0.9rem; color: #333;}
        h2 { margin: 0 0 5px 0; font-size: 1.2rem; }
    </style>
    							<div class="code-section">
							    <h2>CODE</h2>
							    <pre><code> <!DOCTYPE HTML>
</head>
<body>#include &lt;WiFi.h&gt;

// Define the GPIO pin connected to the soil moisture sensor
#define SENSOR_PIN 34

// WiFi credentials for AP mode
const char* ssid = "ESP32_Soil_Moisture";  // SSID of the AP
const char* password = "12345678";         // Password for the AP

WiFiServer server(80);

// HTML content for the web page
String HTMLPage = R"rawliteral(
  &lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Soil Moisture Level&lt;/title&gt;
    &lt;style&gt;
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin-top: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: radial-gradient(circle, white, #00ab41);
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 20px 40px 20px rgba(0, 0, 0, 0.3);
      }
      h1 {
        font-size: 48px;
        margin-bottom: 20px;
      }
      p {
        font-size: 28px;
        margin-bottom: 30px;
      }
    &lt;/style&gt;
    &lt;script&gt;
      function updateData() {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/data", true);
        xhr.onreadystatechange = function() {
          if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
            var response = JSON.parse(xhr.responseText);
            document.getElementById("moistureValue").innerText = response.moistureValue;
            document.getElementById("soilStatus").innerText = response.soilStatus;
          }
        };
        xhr.send();
      }
      setInterval(updateData, 1000); // Update every second
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div class="container"&gt;
      &lt;h1&gt;Soil Moisture Level&lt;/h1&gt;
      &lt;p&gt;Moisture Value: &lt;span id="moistureValue"&gt;Loading...&lt;/span&gt;&lt;/p&gt;
      &lt;p&gt;Status: &lt;span id="soilStatus"&gt;Loading...&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
  &lt;/body&gt;
  &lt;/html&gt;
)rawliteral";

// Function to return sensor data as JSON
String getSensorData() {
  int sensorValue = analogRead(SENSOR_PIN);
  String soilStatus;

  if (sensorValue &gt; 4000) {
    soilStatus = "Dry Soil";
  } else if (sensorValue &gt; 2500) {
    soilStatus = "Moist Soil";
  } else {
    soilStatus = "Wet Soil";
  }

  // Create a JSON string to send the sensor value and soil status
  String jsonData = "{\"moistureValue\": \"" + String(sensorValue) + "\", \"soilStatus\": \"" + soilStatus + "\"}";
  return jsonData;
}

void setup() {
  // Start the Serial Monitor
  Serial.begin(115200);

  // Initialize the sensor pin
  pinMode(SENSOR_PIN, INPUT);

  // Set up ESP32 as an Access Point
  Serial.println("Setting up Access Point...");
  WiFi.softAP(ssid, password);  // Start AP with SSID and password
  Serial.println("Access Point Created");
  
  // Display the IP address of the ESP32 (usually 192.168.4.1 in AP mode)
  Serial.print("AP IP address: ");
  Serial.println(WiFi.softAPIP());

  // Start the server
  server.begin();
}

void loop() {
  // Check if a client has connected
  WiFiClient client = server.available();

  if (client) {
    Serial.println("New Client connected");
    String currentLine = "";
    while (client.connected()) {
      if (client.available()) {
        char c = client.read();
        currentLine += c;

        // If the client requests the root page:
        if (currentLine.endsWith("GET / ")) {
          // Send the webpage
          client.println("HTTP/1.1 200 OK");
          client.println("Content-type:text/html");
          client.println();
          client.print(HTMLPage);
          break;
        }
        // If the client requests the sensor data:
        if (currentLine.endsWith("GET /data ")) {
          // Send the JSON data
          client.println("HTTP/1.1 200 OK");
          client.println("Content-type:application/json");
          client.println();
          client.print(getSensorData());
          break;
        }
      }
    }

    // Clear the current line
    currentLine = "";
    client.stop();
    Serial.println("Client disconnected");
  }
}
</body>
</html>

							</code></pre>
							    <button id="copyButton">Copy Code</button>
							</div>

<h2>CODE EXPLANATION</h2>
													<div class="box">
														<p>The code sets up a Soil Moisture Monitoring System using an ESP32, where users can monitor the soil moisture level on a web page in real-time. Let's break it down.
														<p><strong>Key Components and Their Roles</strong><br>
<strong>1. Libraries Included:</strong><br>
&emsp;&emsp;&emsp;•<strong><code>WiFi.h</code></strong> Handles the ESP32’s Wi-Fi operations, allowing it to establish an Access Point.<br>
<strong>2. WiFi Setup</strong><br>
&emsp;&emsp;&emsp;• The ESP32 creates an Access Point with the name (SSID) "ESP32_Soil_Moisture" and password "12345678."<br>
&emsp;&emsp;&emsp;• It also assigns a static IP address (192.168.4.1) for consistent access, so users always know where to find it.<p>
<strong>3. Soil Moisture Sensor Setup:</strong><br>
&emsp;&emsp;&emsp;• The Soil Moisture sensor is connected to pin 34 of the ESP32, with the <strong><code>#define</code></strong> statements specifying the pin and sensor type.<br>

<div class="button-container">
    <!-- Button to show first image -->
    <button id="showImageButton1" class="show-image-button">Soil Moisture Pinout</button>

    <!-- Button to show second image -->
    <button id="showImageButton2" class="show-image-button">ESP32 Pinout</button>
</div>

<!-- Hidden first image container -->
<div id="imageContainer1" class="hidden">
    <img src="images/soilmoisture.png" alt="Soil Moisture Sensor Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Circuit Digest<p>
</div>

<!-- Hidden second image container -->
<div id="imageContainer2" class="hidden">
    <img src="images/esp32.jpg" alt="ESP32 Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Random Nerd Tutorials<p>
</div>

<!-- JavaScript to handle button clicks for each image -->
<script>
    const showImageButton1 = document.getElementById("showImageButton1");
    const imageContainer1 = document.getElementById("imageContainer1");

    const showImageButton2 = document.getElementById("showImageButton2");
    const imageContainer2 = document.getElementById("imageContainer2");

    // Toggle first image visibility
    showImageButton1.addEventListener("click", function() {
        imageContainer1.classList.toggle("hidden");
    });

    // Toggle second image visibility
    showImageButton2.addEventListener("click", function() {
        imageContainer2.classList.toggle("hidden");
    });
</script>

<!-- CSS for styling -->
<style>
    /* Center the button container */
    .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px; /* Space between buttons */
        margin-top: 10px;
    }

    /* Style for buttons */
    .show-image-button {
        padding: 5px 10px;
        background-color: transparent;
        color: #7f888f !important; /* Set text color to black */
        border: 2px solid #FF6F61; /* Match the border color in your image */
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 30px; /* Ensure sufficient height for vertical centering */
        transition: background-color 0.3s, color 0.3s;
    }

    /* Center text inside the button */
    .show-image-button:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Slightly tinted for hover effect */
        color: #00ab41; /* Example color on hover */
    }

    /* Hide initially */
    .hidden {
        display: none;
    }

    /* Margin for image containers */
    #imageContainer1, #imageContainer2 {
        margin-top: 10px;
    }
</style><p>

<strong>4. Soil Moisture Sensor Data Collection</strong><br>
    &emsp;&emsp;•<strong><code>analogRead(SENSOR_PIN)</code></strong>:Reads the analog value from the sensor connected to pin 34. Based on this value, the code categorizes soil moisture as:<br>
    &emsp;&emsp;&emsp;&emsp;•<strong>Dry Soil:</strong> Sensor value above 4000.<br>
    &emsp;&emsp;&emsp;&emsp;•<strong>Moist Soil:</strong> Sensor value between 2500 and 4000.<br>
    &emsp;&emsp;&emsp;&emsp;•<strong>Wet Soil:</strong> Sensor value below 2500.<br>
    &emsp;&emsp;•These ranges allow users to interpret the moisture status easily, without needing to interpret raw values directly.<p>


    <p><strong>5. Web Page Content</strong><br>
    &emsp;&emsp;• The HTML code for the web page is dynamically generated each time a client requests it. The page includes:<br>
    &emsp;&emsp;&emsp;&emsp;•<strong>Title and Refresh:</strong>The page title, "Soil Moisture Level," is set with a 1-second auto-refresh using <strong><code>&lt;meta http-equiv='refresh' content='1'&gt;</code></strong>, ensuring that users receive up-to-date soil moisture information in real-time.<br>
    &emsp;&emsp;&emsp;&emsp;•<strong>Display of Sensor Value and Status:</strong> The soil moisture level is shown in numeric format and as a moisture status (Dry, Moist, or Wet). This approach gives users clear and actionable information on soil conditions.<p>

    <p><strong>6. Client Connection Handling</strong><br>
    &emsp;&emsp;• The ESP32 constantly checks for client connections. Once a client connects and requests the root page<strong><code>GET /</code></strong>,the ESP32:<br>
    &emsp;&emsp;&emsp;&emsp;• Sends an HTTP header indicating success (HTTP 200 OK) and sets the content type to HTML.<br>
    &emsp;&emsp;&emsp;&emsp;• Generates and serves the HTML page with real-time soil moisture readings.<br>
    &emsp;&emsp;• The client connection is closed after serving the page to free up resources for other potential users.<p>

    <p><strong>7. Code Flow in Setup and Loop Functions</strong><br>
    &emsp;&emsp;•<strong><code>setup()</code>:</strong>Initializes the soil moisture sensor pin, configures the ESP32 as an AP, displays the AP IP address, and starts the HTTP server.<br>
    &emsp;&emsp;•<strong><code>loop()</code>:</strong>Continuously checks for client connections, serves the monitoring page to connected clients, and reads the latest soil moisture value, refreshing the display on the web page.<p>


<strong>8. The Setup <code>setup()</code> and Loop <code>loop()</code> Functions:</strong><br> 
&emsp;&emsp;&emsp;• <strong><code>setup()</code></strong> Initializes the sensor, starts the Access Point, and configures the web server.<br> 
&emsp;&emsp;&emsp;• <strong><code>loop()</code></strong> Continuously listens for incoming client requests to refresh data on the webpage.<p>


													</div>


											</div>
										</div>

								</section>

<!-- Sidebar -->
					<div id="sidebar">
						<div class="inner">

							<!-- Menu -->
								<nav id="menu">
									<header class="major">
										<h2>Menu</h2>
									</header>
									<ul>
										<li><a href="index.html">Homepage</a></li>
										<li><a href="generic.html">The Creation</a></li>
										<li><a href="elements.html">Module Explainer</a></li>
										<li>
											<span class="opener">Introductory Projects</span>
											<ul>
                        <li><a href="io.html">Input Output</a></li>
                        <li><a href="ai.html">Analog Inputs</a></li>
                        <li><a href="pwm.html">PWM (Analog Output)</a></li>
                        <li><a href="sws.html">Switch Web Server</a></li>
                        <li><a href="rlws.html">RGB LED Web Server</a></li>
											</ul>
										</li>
										<li>
											<span class="opener">Main Projects</span>
											<ul>
												<li><a href="project-1.html">Project 1</a></li>
												<li><a href="project-2.html">Project 2</a></li>
												<li><a href="project-3.html">Project 3</a></li>
												<li><a href="project-4.html">Project 4</a></li>
												<li><a href="project-5.html">Project 5</a></li>
												<li><a href="project-6.html">Project 6</a></li>
												<li><a href="project-7.html">Project 7</a></li>
												<li><a href="project-8.html">Project 8</a></li>
												<li><a href="project-9.html">Project 9</a></li>
												<li><a href="project-10.html">Project 10</a></li>
											</ul>
										</li>
									</ul>
								</nav>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>ADVANCED IOT PROJECTS</h2>
									</header>
									<div class="mini-posts">
										<article>
											<a href="https://youtu.be/RUO44kqNP24?si=QO3qiHGQLvJSXDaD" class="image"><img src="https://i.ytimg.com/vi/RUO44kqNP24/hqdefault.jpg?sqp=-oaymwEXCNACELwBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLD_wUN6wdxf151rPD6UWSKlwhLK7Q" alt="" /></a>
											<p>Patient Health Monitoring System Using Raspberry Pi</p>
										</article>
										<article>
											<a href="https://youtu.be/FSqYyjZtH4g?si=9BeVl6KnJ2oD9eBl" class="image"><img src="https://i.ytimg.com/vi/FSqYyjZtH4g/hqdefault.jpg?sqp=-oaymwEbCKgBEF5IVfKriqkDDggBFQAAiEIYAXABwAEG&rs=AOn4CLCztyDAtqgoFMqVVEyold-aKebbbQ" alt="" /></a>
											<p>Women Safety Device Using Internet of Things</p>
										</article>
										<article>
											<a href="https://youtu.be/EamYfGG4Wvg?si=10C8m2DArmPMSOv3" class="image"><img src="https://i.ytimg.com/vi/EamYfGG4Wvg/hqdefault.jpg?sqp=-oaymwE1CKgBEF5IVfKriqkDKAgBFQAAiEIYAXABwAEG8AEB-AH0CYAC0AWKAgwIABABGGUgTShIMA8=&rs=AOn4CLBlZoYwXKvvyn9fsfvRhCCsItaQ3g" alt="" /></a>
											<p>A Web-Based Accident Reporting and Tracking System</p>
										</article>
									</div>
									<ul class="actions">
										<li><a href="https://youtube.com/playlist?list=PL87CgTAGz2yZ0geJ-_9HAK2u8NDMhVwFH&si=cr7ljhFT1B8GZR3-" class="button">More</a></li>
									</ul>
								</section>

							<!-- Section -->
								<section>
									<header class="major">
										<h2>Get in touch</h2>
									</header>
									<ul class="contact">
										<li class="icon solid fa-envelope"><a href="https://sscr.edu/Beta/">https://sscr.edu/Beta/</a></li>
										<li class="icon solid fa-phone">(046) 431-9405</li>
										<li class="icon solid fa-home">Manila-Cavite Road, Sta. Cruz,<br />
										Cavite City, 4100, Philippines</li>
									</ul>
								</section>

							<!-- Footer -->
								<footer id="footer">
									<p class="copyright">&copy; SSC-RdC IOT Development Board. <br>All rights reserved.
								</footer>

						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="assets/js/copy.js"></script>

	</body>
</html>