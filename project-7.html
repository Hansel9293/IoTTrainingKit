<!DOCTYPE HTML>

<html>
	<head>
		<title>PROJECT 7</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<style>
    .hidden {
        display: none; /* Initially hides the sections */
    }
    .toggle-button {
        display: inline-block;
        margin: 10px 0;
        padding: 0px 20px;
        background-color: transparent;
        color: #fff;
        border: none;
        cursor: pointer;
        border-radius: 5px;
    }
    .toggle-button:hover {
        background-color: #0056b3;
    }
    .section {
        padding: 10px;
        border: 1px solid #ddd;
        margin: 10px 0;
    }
</style>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="index.html" class="logo">Project<strong> 7</strong></a>
								</header>

							<!-- Content -->
								<section>
									<header class="main">
										<h1>Room Temperature</h1>
									</header>
                        <!-- Main Image (pic11.jpg) -->
                        <span class="image fit">
                            <a href="images/7.jpg" class="image-link"><img src="images/7.jpg" alt="" /></a>
                        </span>


                        <!-- Modal Dialog -->
                        <div id="modal" class="modal">
                            <span class="close">&times;</span>
                            <img class="modal-content" id="modal-image">
                        </div>

                        <!-- JavaScript to Show Full Image on Click -->
                        <script>
                            // Get all elements with class "image-link"
                            const imageLinks = document.querySelectorAll('.image-link');

                            // Get the modal element
                            const modal = document.getElementById('modal');

                            // Get the image element within the modal
                            const modalImg = document.getElementById('modal-image');

                            // Loop through each image link
                            imageLinks.forEach(link => {
                                link.addEventListener('click', function(event) {
                                    event.preventDefault(); // Prevent default link behavior

                                    // Get href attribute of the clicked link (full-size image URL)
                                    const imageURL = this.getAttribute('href');

                                    // Display the modal
                                    modal.style.display = 'flex'; // Show the modal as flexbox for centering

                                    // Set the clicked image as the source of the modal image
                                    modalImg.src = imageURL;

                                    // Reset modal content position
                                    modal.scrollTop = 0;
                                    modal.scrollLeft = 0;
                                });
                            });

                            // Close the modal when the close button (x) is clicked
                            const closeBtn = document.querySelector('.close');
                            closeBtn.addEventListener('click', function() {
                                modal.style.display = 'none';
                            });

                            // Close the modal when clicking outside of it
                            window.addEventListener('click', function(event) {
                                if (event.target === modal) {
                                    modal.style.display = 'none';
                                }
                            });

                            // Enable zoom functionality
                            modalImg.addEventListener('click', function() {
                                if (modalImg.classList.contains('zoomed')) {
                                    modalImg.classList.remove('zoomed');
                                } else {
                                    modalImg.classList.add('zoomed');
                                }
                            });
                        </script>
									<!-- Content -->
										<h2 id="content">HOW IT WORKS?</h2>
										<p>Temperature of a particular area can also be monitored by using temperature and humidity sensor which is used in monitoring the room temperature. The sensing component is usually mounted in the room where it collects information on temperature variations and relay this to a microcontroller or monitoring means. It filters and translates the raw temperature readings into easily understandable form or format such as Celsius or Fahrenheit. It can be demonstrated on a display panel, recorded on record time or interfaced wirelessly with another system. If the temperature goes above or below the set limit the system can send notifications, alerts or even control other related devices such as fans or heaters. Climate control is maintained and kept constant for comfort, safety, or a specific climate that a building’s occupants may desire.
										</p>
										<h2 id="content">PARTS NEEDED:</h2>
										<p>• Main Board Module<br>
											• Smart Kitchen Module<br>
											• Connector Cable<br></p>

							<section>
								<header class="main">
									<h2 id="content">SENSOR IN THE MODULE TO BE USED</h2></header>
									<p><strong>DHT11 Temperature and Humidity Sensor</strong><br> This sensor has a temperature measuring component, the thermistor and a humidity measuring component. Once in a while, it records the present air temperature as well as the relative humidity. This data is transmitted digitally to a microcontroller such as an Arduino or ESP32, where the raw values are received by the latter which serves to convert the recorded data into temperatures in either degree Celsius or Fahrenheit as well as humidity percentage.
									</p>
							</section>


						<!-- Image Section -->
						<h2>THE BUILD</h2>

						<!-- Main Image (pic11.jpg) -->
						<span class="image fit">
						    <a href="images/sdht.jpg" class="image-link"><img src="images/sdht.jpg" alt="" /></a>
						</span>

						<!-- Modal Dialog -->
						<div id="modal" class="modal">
						    <span class="close">&times;</span>
						    <img class="modal-content" id="modal-image">
						</div>

						<!-- JavaScript to Show Full Image on Click -->
						<script>
						    // Get all elements with class "image-link"
						    const imageLinks = document.querySelectorAll('.image-link');

						    // Get the modal element
						    const modal = document.getElementById('modal');

						    // Get the image element within the modal
						    const modalImg = document.getElementById('modal-image');

						    // Loop through each image link
						    imageLinks.forEach(link => {
						        link.addEventListener('click', function(event) {
						            event.preventDefault(); // Prevent default link behavior

						            // Get href attribute of the clicked link (full-size image URL)
						            const imageURL = this.getAttribute('href');

						            // Display the modal
						            modal.style.display = 'flex'; // Show the modal as flexbox for centering

						            // Set the clicked image as the source of the modal image
						            modalImg.src = imageURL;

						            // Reset modal content position
						            modal.scrollTop = 0;
						            modal.scrollLeft = 0;
						        });
						    });

						    // Close the modal when the close button (x) is clicked
						    const closeBtn = document.querySelector('.close');
						    closeBtn.addEventListener('click', function() {
						        modal.style.display = 'none';
						    });

						    // Close the modal when clicking outside of it
						    window.addEventListener('click', function(event) {
						        if (event.target === modal) {
						            modal.style.display = 'none';
						        }
						    });

						    // Enable zoom functionality
						    modalImg.addEventListener('click', function() {
						        if (modalImg.classList.contains('zoomed')) {
						            modalImg.classList.remove('zoomed');
						        } else {
						            modalImg.classList.add('zoomed');
						        }
						    });
						</script>

<h2>CHOOSE WHAT PROJECT YOU WISH TO PERFORM"</h2>
<!-- Button for Set 1 -->
<button id="toggleSet1" class="toggle-button">Through the Internet</button>
<!-- Section 1 -->
<div id="set1" class="hidden">
    <div class="section">
        <h2>Instructions</h2>
<p><strong>Step 1: Assembling the System</strong><br>
<strong>Positioning the Module:</strong><br>
1. Take the Biometrics Module (enclosed in the 3D-printed box) and align it over the main board.<br>
2. Gently press the module onto the main board's connector pins until it fits securely in place.<br>   
3. Ensure that the module is correctly seated to avoid loose connections.<p>
<strong>Step 2: Powering the System</strong><br>
<strong>Connecting Power:</strong><br>
1. Get the connecting cable and attach it into the laptop that you will use to upload the code.<br>
2. Plug in the other end of it to the main board. The system will automatically power on.<br>
<strong>Visual Indicator Check:</strong><br>
Observe the LED indicators on the main board. The system should show a steady power LED to confirm it's operational.<p>
<strong>Step 3: Connecting to the Internet and Adafruit IO:</strong><br>
1. Copy the code in the website under "Through Internet" then change the WiFi SSID and password depending on what connection you wish to connect.
2. Open Adafruit IO in your search engine then use "denzelgaddi5@gmail.com" as email and "Denzel92934." as password.
3. Select Project 7 in the dashboard. <p>
<strong>Testing the Alerts:</strong><br>
To test the system, place you palm in front of the sensor. The alerts should activate.
                            </p>

<!-- Video Button -->
<button id="showVideoButton">Watch Video Instruction</button>

<!-- Video Modal -->
<div id="videoModal" class="modal">
    <span class="close" id="closeVideo">&times;</span>
    <div class="video-container">
        <video id="videoPlayer" controls>
            <source src="videos/vkitchen.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
</div>

<!-- CSS for Styling -->
<style>
    /* Video Button */
    #showVideoButton {
        display: block;
        margin: 20px auto;
        padding: 1px 5px;
        background-color: transparent;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        font-size: 12px;
    }

    /* Video Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
    }

    .video-container {
        width: 80%;
        max-width: 600px;
    }

    .close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 2rem;
        color: white;
        cursor: pointer;
    }

    video {
        width: 100%;
        height: auto;
        border: none;
    }
</style>

<!-- JavaScript for Modal Functionality -->
<script>
    // Get the elements
    const showVideoButton = document.getElementById("showVideoButton");
    const videoModal = document.getElementById("videoModal");
    const closeVideo = document.getElementById("closeVideo");
    const videoPlayer = document.getElementById("videoPlayer");

    // Show modal when button is clicked
    showVideoButton.addEventListener("click", function() {
        videoModal.style.display = "flex";
        videoPlayer.play(); // Auto-play video when modal is shown
    });

    // Close modal when the close button is clicked
    closeVideo.addEventListener("click", function() {
        videoModal.style.display = "none";
        videoPlayer.pause(); // Pause video when modal is closed
        videoPlayer.currentTime = 0; // Reset video to start
    });

    // Close modal when clicking outside the video
    window.addEventListener("click", function(event) {
        if (event.target === videoModal) {
            videoModal.style.display = "none";
            videoPlayer.pause(); // Pause video when modal is closed
            videoPlayer.currentTime = 0; // Reset video to start
        }
    });
</script>
    </div>
    <div class="section">
        <h2>Code</h2>
        <pre><code>
#include &lt;WiFi.h&gt;
#include "AdafruitIO_WiFi.h"
#include &lt;DHT.h&gt;

// Adafruit IO credentials
#define IO_USERNAME "IoTTrainingBoard"
#define IO_KEY "aio_Ceey02l0UmBmqgSj95VjH1090iRC"

// WiFi credentials
#define WIFI_SSID "PLDTHOMEFIBR5e300"
#define WIFI_PASS "SASHuke@1123"

// Adafruit IO instance
AdafruitIO_WiFi io(IO_USERNAME, IO_KEY, WIFI_SSID, WIFI_PASS);

// Feeds for temperature, humidity, and status
AdafruitIO_Feed *temperatureFeed = io.feed("temperature");
AdafruitIO_Feed *humidityFeed = io.feed("humidity");
AdafruitIO_Feed *tempStatusFeed = io.feed("temp_status");

// DHT11 Sensor Pin
#define DHTPIN 26      // Pin connected to the DHT11 data pin
#define DHTTYPE DHT11  // DHT11 sensor type

DHT dht(DHTPIN, DHTTYPE);

float temperature;
float humidity;
String tempStatus;

// Function to read the temperature and humidity from the DHT11 sensor
void readDHT11() {
  humidity = dht.readHumidity();
  temperature = dht.readTemperature();

  // Check if any reads failed and exit early
  if (isnan(humidity) || isnan(temperature)) {
    tempStatus = "Sensor Error";
    return;
  }

  // Determine temperature status
  if (temperature &lt; 20) {
    tempStatus = "Cold";
  } else if (temperature &lt;= 20 && temperature &lt;= 30) {
    tempStatus = "Comfortable";
  } else {
    tempStatus = "Hot";
  }
}

void setup() {
  Serial.begin(115200);

  dht.begin(); // Initialize the DHT sensor

  // Connect to Adafruit IO
  Serial.print("Connecting to Adafruit IO...");
  io.connect();

  // Wait for connection
  while (io.status() &lt; AIO_CONNECTED) {
    Serial.print(".");
    delay(500);
  }
  Serial.println("Connected!");

  // Initialize Adafruit IO feeds
  temperatureFeed-&gt;save(0.0); // Initialize temperature
  humidityFeed-&gt;save(0.0);    // Initialize humidity
  tempStatusFeed-&gt;save("Cold"); // Initialize temperature status
}

void loop() {
  io.run();       // Keep Adafruit IO connection alive
  readDHT11();    // Read the DHT11 sensor data

  // Publish temperature, humidity, and status to Adafruit IO
  if (tempStatus != "Sensor Error") {
    temperatureFeed-&gt;save(temperature);
    humidityFeed-&gt;save(humidity);
    tempStatusFeed-&gt;save(tempStatus);
  }

  // Debugging logs
  Serial.print("Temperature: ");
  Serial.print(temperature);
  Serial.print(" C | Humidity: ");
  Serial.print(humidity);
  Serial.print(" % | Status: ");
  Serial.println(tempStatus);

  delay(1000); // Update every second
}


</code></pre><button id="copyButton">Copy Code</button>
    </div>
    <div class="section">
        <h2>Code Explanation</h2>        
<p>The code sets up a Room Temperature Monitoring System using a DHT11 sensor and an ESP32, creating an independent network (Access Point) to let users view real-time temperature and humidity data on a web page. Let's break it down.
                            <p><strong>Key Components and Their Roles</strong><br>
<strong>1. Libraries Included:</strong><br>
&emsp;&emsp;&emsp;•<strong><code>WiFi.h</code></strong>Handles Wi-Fi connectivity for the ESP32.<br>
&emsp;&emsp;&emsp;•<strong><code>AdafruitIO_WiFi.h</code></strong>Integrates the ESP32 with Adafruit IO for data feeds and connectivity.<br>
&emsp;&emsp;&emsp;•<strong><code>DHT.h</code></strong>Reads temperature and humidity data from the DHT11 sensor.<br>
<strong>2. WiFi Setup:</strong><br>
&emsp;&emsp;&emsp;• Configures the ESP32 to connect to a Wi-Fi network using SSID <code>PLDTHOMEFIBR5e300</code> and password <code>SASHuke@1123</code>.<br>
&emsp;&emsp;&emsp;• Establishes an Adafruit IO instance using the username <code>Hanseljedd</code> and key <code>aio_Ceey02l0UmBmqgSj95VjH1090iRC</code>.<p>

<strong>3. DHT11 Sensor Setup:</strong><br>
&emsp;&emsp;&emsp;• The DHT11 sensor is connected to GPIO 26 for temperature and humidity monitoring.<br>
&emsp;&emsp;&emsp;• The sensor type is specified as <code>DHT11</code> for compatibility with the library.<br>
&emsp;&emsp;&emsp;• Readings are categorized into temperature statuses:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Cold</code></strong> for temperatures &lt; 20°C.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Comfortable</code></strong> for temperatures between 20°C and 30°C.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>Hot</code></strong> for temperatures &gt; 30°C.<p>

<div class="button-container">
    <!-- Button to show first image -->
    <button id="showImageButton1" class="show-image-button">DHT11 Pinout</button>

    <!-- Button to show second image -->
    <button id="showImageButton2" class="show-image-button">ESP32 Pinout</button>
</div>

<!-- Hidden first image container -->
<div id="imageContainer1" class="hidden">
    <img src="images/dht11.jpg" alt="DHT11 Sensor Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Circuit Basics<p>
</div>

<!-- Hidden second image container -->
<div id="imageContainer2" class="hidden">
    <img src="images/esp32.jpg" alt="ESP32 Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Random Nerd Tutorials<p>
</div>

<!-- JavaScript to handle button clicks for each image -->
<script>
    const showImageButton1 = document.getElementById("showImageButton1");
    const imageContainer1 = document.getElementById("imageContainer1");

    const showImageButton2 = document.getElementById("showImageButton2");
    const imageContainer2 = document.getElementById("imageContainer2");

    // Toggle first image visibility
    showImageButton1.addEventListener("click", function() {
        imageContainer1.classList.toggle("hidden");
    });

    // Toggle second image visibility
    showImageButton2.addEventListener("click", function() {
        imageContainer2.classList.toggle("hidden");
    });
</script>

<!-- CSS for styling -->
<style>
    /* Center the button container */
    .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px; /* Space between buttons */
        margin-top: 10px;
    }

    /* Style for buttons */
    .show-image-button {
        padding: 5px 10px;
        background-color: transparent;
        color: #7f888f !important; /* Set text color to black */
        border: 2px solid #FF6F61; /* Match the border color in your image */
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 30px; /* Ensure sufficient height for vertical centering */
        transition: background-color 0.3s, color 0.3s;
    }

    /* Center text inside the button */
    .show-image-button:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Slightly tinted for hover effect */
        color: #00ab41; /* Example color on hover */
    }

    /* Hide initially */
    .hidden {
        display: none;
    }

    /* Margin for image containers */
    #imageContainer1, #imageContainer2 {
        margin-top: 10px;
    }
</style><p>

<strong>4. Server Functions:</strong><br>
&emsp;&emsp;&emsp;• Key server functions include:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>readDHT11()</code></strong>Reads temperature and humidity values from the DHT11 sensor and determines the temperature status.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>temperatureFeed</code></strong>Publishes the temperature data to Adafruit IO.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>humidityFeed</code></strong>Publishes the humidity data to Adafruit IO.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;•<strong><code>tempStatusFeed</code></strong>Publishes the temperature status ("Cold," "Comfortable," or "Hot") to Adafruit IO.<p>

<strong>5. Data Collection and Management:</strong><br> 
&emsp;&emsp;&emsp;• The<strong><code>readDHT11()</code></strong>function captures data from the DHT11 sensor and verifies its accuracy.<br>
&emsp;&emsp;&emsp;• Status thresholds ensure that temperature values are categorized for easy interpretation.<br>
&emsp;&emsp;&emsp;• Data is sent to Adafruit IO feeds for monitoring via the web interface.<p>

<strong>6. Web Interface Design:</strong><br> 
&emsp;&emsp;&emsp;• Adafruit IO serves as the web interface for displaying temperature, humidity, and their status.<br> 
&emsp;&emsp;&emsp;• Users can monitor real-time updates on environmental conditions remotely.<p>

<strong>7. JavaScript and AJAX Updates:</strong><br> 
&emsp;&emsp;&emsp;• Adafruit IO provides real-time updates for temperature, humidity, and status, ensuring users can view changes dynamically.<br> 
&emsp;&emsp;&emsp;• Users can access data through Adafruit IO dashboards.<p>

<strong>8. The Setup<code>setup()</code>and Loop<code>loop()</code>Functions:</strong><br> 
&emsp;&emsp;&emsp;•<strong><code>setup()</code></strong>Initializes the DHT11 sensor, connects to Adafruit IO, and initializes feeds with default values.<br> 
&emsp;&emsp;&emsp;•<strong><code>loop()</code></strong>Reads sensor data, updates Adafruit IO feeds, and prints debug information to the Serial Monitor.<p>
    </div>
</div>


<!-- Button for Set 2 -->
<button id="toggleSet2" class="toggle-button">WiFi Direct</button>
<!-- Section 2 -->
<div id="set2" class="hidden">
    <div class="section">
<p><strong>Step 1: Assembling the System</strong><br>
<strong>Positioning the Module:</strong><br>
1. Take the Smart Kitchen Module (enclosed in the 3D-printed box) and align it over the main board.<br>
2. Gently press the module onto the main board's connector pins until it fits securely in place.<br>
3. Ensure that the module is correctly seated to avoid loose connections.<p>
<strong>Step 2: Powering the System</strong><br>
<strong>Connecting Power:</strong><br>
1. Get the connecting cable and attach it into the laptop that you will use to upload the code.<br>
2. Plug in the other end of it to the main board. The system will automatically power on.<br>
<strong>Visual Indicator Check:</strong><br>
Observe the LED indicators on the main board. The system should show a steady power LED to confirm it's operational.<p>
<strong>Step 3: Connecting to Web Server:</strong><br>
1. Once the serial monitor says "Code Uploaded", open the serial monitor of the Arduino IDE then press the <strong>EN</strong> button to show the IP address.<br>
2. Open your WiFi and look for <strong>ESP32_DHT11</strong>. Choose that option and enter password <strong>12345678</strong><be>.
3. Enter the IP address in a search engine <strong>192.168.4.1</strong>. <p>
<strong>Step 4: Monitoring and Alerts</strong><br>
<strong>Understanding the Alerts:</strong><br>
1. The system is equipped with a visual (web server) monitoring system.<br>
2. When the temperature reading is below 20, it will indicate "Cold". When it is between 20-30, it will indicate "Comfortable", and "Hot" when the reading is above 30. The humidity reading is placed just below the numerical temperature reading.<p>
<strong>Testing the Alerts:</strong><br>
To test the system, simulate the presence of gas (e.g., using a gas lighter without ignition) near the sensor. The alerts should activate.
                            </p>


<!-- Video Button -->
<button id="showVideoButton">Watch Video Instruction</button>

<!-- Video Modal -->
<div id="videoModal" class="modal">
    <span class="close" id="closeVideo">&times;</span>
    <div class="video-container">
        <video id="videoPlayer" controls>
            <source src="videos/kitchen.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>
</div>

<!-- CSS for Styling -->
<style>
    /* Video Button */
    #showVideoButton {
        display: block;
        margin: 20px auto;
        padding: 1px 5px;
        background-color: transparent;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        font-size: 12px;
    }

    /* Video Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
    }

    .video-container {
        width: 80%;
        max-width: 600px;
    }

    .close {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 2rem;
        color: white;
        cursor: pointer;
    }

    video {
        width: 100%;
        height: auto;
        border: none;
    }
</style>

<!-- JavaScript for Modal Functionality -->
<script>
    // Get the elements
    const showVideoButton = document.getElementById("showVideoButton");
    const videoModal = document.getElementById("videoModal");
    const closeVideo = document.getElementById("closeVideo");
    const videoPlayer = document.getElementById("videoPlayer");

    // Show modal when button is clicked
    showVideoButton.addEventListener("click", function() {
        videoModal.style.display = "flex";
        videoPlayer.play(); // Auto-play video when modal is shown
    });

    // Close modal when the close button is clicked
    closeVideo.addEventListener("click", function() {
        videoModal.style.display = "none";
        videoPlayer.pause(); // Pause video when modal is closed
        videoPlayer.currentTime = 0; // Reset video to start
    });

    // Close modal when clicking outside the video
    window.addEventListener("click", function(event) {
        if (event.target === videoModal) {
            videoModal.style.display = "none";
            videoPlayer.pause(); // Pause video when modal is closed
            videoPlayer.currentTime = 0; // Reset video to start
        }
    });
</script>

    </div>
    <div class="section">
        <h2>Code</h2>
        <pre><code>
#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;
#include &lt;DHT.h&gt;

// Define the Access Point credentials
const char* ssid = "ESP32_DHT11";
const char* password = "12345678";

// Define Static IP Address
IPAddress local_IP(192, 168, 4, 1);
IPAddress gateway(192, 168, 4, 1);
IPAddress subnet(255, 255, 255, 0);

// DHT11 Sensor Pin
#define DHTPIN 26      // Pin connected to the DHT11 data pin
#define DHTTYPE DHT11  // DHT11 sensor type

DHT dht(DHTPIN, DHTTYPE);

WebServer server(80); // Create a web server on port 80

float temperature;
float humidity;
String tempStatus;

// Function to read the temperature and humidity from the DHT11 sensor
void readDHT11() {
  humidity = dht.readHumidity();
  temperature = dht.readTemperature();

  // Check if any reads failed and exit early
  if (isnan(humidity) || isnan(temperature)) {
    tempStatus = "Sensor Error";
    return;
  }

  // Determine temperature status
  if (temperature &lt; 20) {
    tempStatus = "Cold";
  } else if (temperature &gt;= 20 &amp;&amp; temperature &lt;= 30) {
    tempStatus = "Comfortable";
  } else {
    tempStatus = "Hot";
  }
}

// Serve the web page
void handleRoot() {
  String html = "&lt;html&gt;&lt;head&gt;&lt;title&gt;DHT11 Sensor Monitor&lt;/title&gt;";
  html += "&lt;meta name='viewport' content='width=device-width, initial-scale=1'&gt;";
  html += "&lt;style&gt;";
  html += "body { font-family: Arial, sans-serif; text-align: center; background: radial-gradient(circle, white, #00ab41); color: white; height: 100vh; display: flex; justify-content: center; align-items: center; margin: 0; }";
  html += ".container { width: 90%; max-width: 400px; background-color: white; padding: 20px; border-radius: 15px; box-shadow: 0 20px 40px 20px rgba(0, 0, 0, 0.3); text-align: center; }";
  html += "h1 { font-size: 2.5rem; color: black; margin-bottom: 20px; }";
  html += ".status-bar { background-color: #00ab41; padding: 10px; border-radius: 10px; font-size: 1.2rem; margin-top: 20px; }";
  html += "&lt;/style&gt;";
  
  // Add JavaScript to refresh data
  html += "&lt;script&gt;";
  html += "setInterval(function() {";
  html += "fetch('/dht').then(function(response) {";
  html += "return response.json();";  // Expecting JSON data now
  html += "}).then(function(data) {";
  html += "document.querySelector('#temperature').innerText = data.temperature.toFixed(1);";
  html += "document.querySelector('#humidity').innerText = data.humidity.toFixed(1);";
  html += "document.querySelector('#tempStatus').innerText = data.tempStatus;";
  html += "});";
  html += "}, 1000);";  // Update every 1 second
  html += "&lt;/script&gt;&lt;/head&gt;&lt;body&gt;";
  
  html += "&lt;div class='container'&gt;";
  html += "&lt;h1&gt;DHT11 Sensor Monitor&lt;/h1&gt;";
  
  // Display temperature, humidity, and status
  html += "&lt;div class='status-bar'&gt;";
  html += "&lt;p&gt;Temperature: &lt;span id='temperature'&gt;0.0&lt;/span&gt;C&lt;/p&gt;";
  html += "&lt;p&gt;Humidity: &lt;span id='humidity'&gt;0.0&lt;/span&gt; %&lt;/p&gt;";
  html += "&lt;p&gt;Status: &lt;span id='tempStatus'&gt;Cold&lt;/span&gt;&lt;/p&gt;";
  html += "&lt;/div&gt;";

  html += "&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;";

  server.send(200, "text/html", html);
}

// Serve the temperature and humidity as JSON for AJAX requests
void handleDHT() {
  readDHT11();  // Update the temperature, humidity, and status
  
  // Send temperature and humidity as JSON
  String json = "{ \"temperature\": " + String(temperature, 1) + ", \"humidity\": " + String(humidity, 1) + ", \"tempStatus\": \"" + tempStatus + "\" }";
  server.send(200, "application/json", json);
}

void setup() {
  Serial.begin(115200);
  
  dht.begin(); // Initialize the DHT sensor

  // Start WiFi as an access point
  WiFi.softAPConfig(local_IP, gateway, subnet);
  WiFi.softAP(ssid, password);

  Serial.println("Access Point Started");
  Serial.println(WiFi.softAPIP());

  // Start the web server
  server.on("/", handleRoot);
  server.on("/dht", handleDHT);  // Endpoint for AJAX requests
  server.begin();
}

void loop() {
  server.handleClient();  // Handle web requests
}
        </code></pre><button id="copyButton">Copy Code</button>
    </div>

    <div class="section"><h2>Code Explanation</h2><p>
<p>The code sets up a Room Temperature Monitoring System using a DHT11 sensor and an ESP32, creating an independent network (Access Point) to let users view real-time temperature and humidity data on a web page. Let's break it down.
                            <p><strong>Key Components and Their Roles</strong><br>
<strong>1. Libraries Included:</strong><br>
&emsp;&emsp;&emsp;•<strong><code>WiFi.h</code></strong>Executes Wi-Fi related activities, thus enabling the ESP32 to configure the formation of an Access Point for use by a user.<br>
&emsp;&emsp;&emsp;•<strong><code>WebServer.h</code></strong>Configures an HTTP server on the ESP32 to serve the web page.<p>
<strong>2. WiFi Setup</strong><br>
&emsp;&emsp;&emsp;• By inserting the ESP32, an Access Point is configured with the Service Set Identifier (SSID) ESP32_DHT11 and the password 12345678.<br>
&emsp;&emsp;&emsp;• The ESP32 configures a static IP address for easy connection to the control interface by users.<p>
<strong>3. DHT11 Sensor Setup:</strong><br>
&emsp;&emsp;&emsp;• The DHT11 sensor is connected to pin 26 of the ESP32, with the <strong><code>#define</code></strong> statements pointing out the pin and sensor to be used.<br>

<div class="button-container">
    <!-- Button to show first image -->
    <button id="showImageButton1" class="show-image-button">DHT11 Pinout</button>

    <!-- Button to show second image -->
    <button id="showImageButton2" class="show-image-button">ESP32 Pinout</button>
</div>

<!-- Hidden first image container -->
<div id="imageContainer1" class="hidden">
    <img src="images/dht11.jpg" alt="DHT11 Sensor Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Circuit Basics<p>
</div>

<!-- Hidden second image container -->
<div id="imageContainer2" class="hidden">
    <img src="images/esp32.jpg" alt="ESP32 Image" style="max-width: 100%; height: auto;"><br>
    Photo Credit: Random Nerd Tutorials<p>
</div>

<!-- JavaScript to handle button clicks for each image -->
<script>
    const showImageButton1 = document.getElementById("showImageButton1");
    const imageContainer1 = document.getElementById("imageContainer1");

    const showImageButton2 = document.getElementById("showImageButton2");
    const imageContainer2 = document.getElementById("imageContainer2");

    // Toggle first image visibility
    showImageButton1.addEventListener("click", function() {
        imageContainer1.classList.toggle("hidden");
    });

    // Toggle second image visibility
    showImageButton2.addEventListener("click", function() {
        imageContainer2.classList.toggle("hidden");
    });
</script>

<!-- CSS for styling -->
<style>
    /* Center the button container */
    .button-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px; /* Space between buttons */
        margin-top: 10px;
    }

    /* Style for buttons */
    .show-image-button {
        padding: 5px 10px;
        background-color: transparent;
        color: #7f888f !important; /* Set text color to black */
        border: 2px solid #FF6F61; /* Match the border color in your image */
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.75rem;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 30px; /* Ensure sufficient height for vertical centering */
        transition: background-color 0.3s, color 0.3s;
    }

    /* Center text inside the button */
    .show-image-button:hover {
        background-color: rgba(255, 255, 255, 0.2); /* Slightly tinted for hover effect */
        color: #00ab41; /* Example color on hover */
    }

    /* Hide initially */
    .hidden {
        display: none;
    }

    /* Margin for image containers */
    #imageContainer1, #imageContainer2 {
        margin-top: 10px;
    }
</style><p>

<strong>4. Server Functions:</strong><br>
&emsp;&emsp;&emsp;• The ESP32 in this design operates a web server running on port 80 <strong><code>(WebServer server(80);)</code></strong>.
<br>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;There are two main server functions:<br>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;• <strong><code>handleRoot()</code></strong> The first page shows the current temperature and humidity which are considered the most crucial measurements.<br>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;• <strong><code>handleDHT()</code></strong> It brings real-time data in the data interchange format used on the web page to update it without refreshing.<p>

<strong>5. Data Collection with <code>readDHT11()</code>:</strong><br> 
&emsp;&emsp;&emsp;• The <strong><code>readDHT11()</code></strong> is another function that will read values from the sensor to store the temperature and humidity data.<br> &emsp;&emsp;&emsp;• This one categorizes the temperature into three basic forms which are “Cold,” “Comfortable,” or “Hot” the simplicity of this format makes it easy to be understood from a distance.<p>

<strong>6. Web Interface Design:</strong><br> 
&emsp;&emsp;&emsp;• The interface of the site is coded in HTML and CSS to make the page layout balanced and visually friendly.<br> 
&emsp;&emsp;&emsp;• The <strong><code>container</code></strong> div styles a card like box which enshrine the sensor.<br> 
&emsp;&emsp;&emsp;• The <strong><code>status-bar</code></strong> highlights real-time conditions such as temperature, humidity, and temperature status.<p>

<strong>7. JavaScript and AJAX Updates:</strong><br> 
&emsp;&emsp;&emsp;• The <strong><code>setInterval()</code></strong> JavaScript function request data from the <strong><code>/dht</code></strong> every one second and provide real time feed for the displayed values.<br> 
&emsp;&emsp;&emsp;• It there allow for real time update without the need of reloading the page thereby improving the users experience.<p>

<strong>8. The Setup <code>setup()</code> and Loop <code>loop()</code> Functions:</strong><br> 
&emsp;&emsp;&emsp;• <strong><code>setup()</code></strong> Starts the sensor, enables creation of an Access Point, and sets up the Web Server.<br> 
&emsp;&emsp;&emsp;• <strong><code>loop()</code></strong> Presents a continuous search for incoming requests from the clients to update the data on the webpage.<p>


<script>
    // Toggle visibility for Set 1
    const toggleSet1 = document.getElementById('toggleSet1');
    const set1 = document.getElementById('set1');
    toggleSet1.addEventListener('click', () => {
        set1.classList.toggle('hidden'); // Toggles the "hidden" class
    });

    // Toggle visibility for Set 2
    const toggleSet2 = document.getElementById('toggleSet2');
    const set2 = document.getElementById('set2');
    toggleSet2.addEventListener('click', () => {
        set2.classList.toggle('hidden'); // Toggles the "hidden" class
    });
</script>

    </div><p>
</div>

<p><h2>ASSESSMENT</h2>
<div class="box">
In this section, students are required to accomplish the following activity.<p><p>
<strong>Project Description</strong><br>
The provided code reads temperature and humidity from a DHT11 sensor and publishes the data to Adafruit IO. It contains two intentional errors. Your task is to:
<br>
&emsp;&emsp;&emsp;- Identify and fix the errors to make the code functional.<br>
&emsp;&emsp;&emsp;- Answer the provided questions to explain the reasons for your changes.<br>

<strong>Code with Bug</strong><br>
The bug is in the handleBookSubmission function. Examine the code snippet below carefully.<br>
  <pre><code>
#include &lt;WiFi.h&gt;
#include "AdafruitIO_WiFi.h"
#include &lt;DHT.h&gt;

// Adafruit IO credentials
#define IO_USERNAME "your_username"
#define IO_KEY "your_aio_key"

// WiFi credentials
#define WIFI_SSID "your_wifi_ssid"
#define WIFI_PASS "your_wifi_password"

// Adafruit IO instance
AdafruitIO_WiFi io(IO_USERNAME, IO_KEY, WIFI_SSID, WIFI_PASS);

// Feeds for temperature, humidity, and status
AdafruitIO_Feed *temperatureFeed = io.feed("temperature");
AdafruitIO_Feed *humidityFeed = io.feed("humidity");
AdafruitIO_Feed *tempStatusFeed = io.feed("temp_status");

// DHT11 Sensor Pin
#define DHTPIN 26      // Pin connected to the DHT11 data pin
#define DHTTYPE DHT11  // DHT11 sensor type

// Intentional Error 1: DHT object initialization is missing
// DHT dht(DHTPIN, DHTTYPE);

float temperature;
float humidity;
String tempStatus;

// Function to read the temperature and humidity from the DHT11 sensor
void readDHT11() {
  humidity = dht.readHumidity();
  temperature = dht.readTemperature();

  // Check if any reads failed and exit early
  if (isnan(humidity) || isnan(temperature)) {
    tempStatus = "Sensor Error";
    return;
  }

  // Determine temperature status
  if (temperature &lt; 20) {
    tempStatus = "Cold";
  } 
  // Intentional Error 2: Logical operator is incorrect
  else if (temperature &lt;= 20 && temperature &lt;= 30) {
    tempStatus = "Comfortable";
  } else {
    tempStatus = "Hot";
  }
}

void setup() {
  Serial.begin(115200);

  // dht.begin(); // Intentional Error 3: Missing sensor initialization

  // Connect to Adafruit IO
  Serial.print("Connecting to Adafruit IO...");
  io.connect();

  while (io.status() &lt; AIO_CONNECTED) {
    Serial.print(".");
    delay(500);
  }
  Serial.println("Connected!");

  // Initialize Adafruit IO feeds
  temperatureFeed->save(0.0);   // Initialize temperature
  humidityFeed->save(0.0);      // Initialize humidity
  tempStatusFeed->save("Cold"); // Initialize temperature status
}

void loop() {
  io.run();     // Keep Adafruit IO connection alive
  readDHT11();  // Read the DHT11 sensor data

  // Publish data only if readings are valid
  if (tempStatus != "Sensor Error") {
    temperatureFeed->save(temperature);
    humidityFeed->save(humidity);
    tempStatusFeed->save(tempStatus);
  }

  // Debugging logs
  Serial.print("Temperature: ");
  Serial.print(temperature);
  Serial.print(" C | Humidity: ");
  Serial.print(humidity);
  Serial.print(" % | Status: ");
  Serial.println(tempStatus);

  delay(1000); // Update every second
}
  </pre></code>

    <button id="key" class="toggle-button">Answer Key and Questions</button>
<!-- Section 1 -->
<div id="answerkey" class="hidden">

    <div class="section">
<strong>Error 1: Why did you add the line to initialize the DHT sensor object?<br></strong>
&emsp;&emsp;&emsp;Provide an explanation of why the missing DHT object initialization caused an issue and how adding the correct line fixed it.<br><br>
<strong>Error 2: Why did you change the logical operator in the temperature condition?<br></strong>
&emsp;&emsp;&emsp;Explain the issue with the original condition and how your fix improved the logic for determining the temperature status.<br><br>
<strong>(Optional Challenge) Can you identify any improvements or optimizations that could make the code more efficient or readable?<br></strong>
&emsp;&emsp;&emsp;Share your thoughts on any additional changes you made or suggest improvements for future versions of the code.<br>
</div>
</div></div>
<script>
    // Toggle visibility for Answer Key
    const key = document.getElementById('key');
    const answerkey = document.getElementById('answerkey');
    key.addEventListener('click', () => {
        answerkey.classList.toggle('hidden'); // Toggles the "hidden" class
    });
</script>


                      </div>
                    </div>

                </section>

<!-- Sidebar -->
          <div id="sidebar">
            <div class="inner">

              <!-- Menu -->
                <nav id="menu">
                  <header class="major">
                    <h2>Menu</h2>
                  </header>
                  <ul>
                    <li><a href="index.html">Homepage</a></li>
                    <li><a href="generic.html">The Creation</a></li>
                    <li><a href="elements.html">Module Explainer</a></li>
                    <li>
                      <span class="opener">Introductory Projects</span>
                      <ul>
                        <li><a href="io.html">Input Output</a></li>
                        <li><a href="ai.html">Analog Inputs</a></li>
                        <li><a href="pwm.html">PWM (Analog Output)</a></li>
                        <li><a href="sws.html">Switch Web Server</a></li>
                        <li><a href="rlws.html">RGB LED Web Server</a></li>
                      </ul>
                    </li>
                    <li>
                      <span class="opener">Main Projects</span>
                      <ul>
                        <li><a href="project-1.html">Project 1</a></li>
                        <li><a href="project-2.html">Project 2</a></li>
                        <li><a href="project-3.html">Project 3</a></li>
                        <li><a href="project-4.html">Project 4</a></li>
                        <li><a href="project-5.html">Project 5</a></li>
                        <li><a href="project-6.html">Project 6</a></li>
                        <li><a href="project-7.html">Project 7</a></li>
                        <li><a href="project-8.html">Project 8</a></li>
                        <li><a href="project-9.html">Project 9</a></li>
                        <li><a href="project-10.html">Project 10</a></li>
                      </ul>
                    </li>
                  </ul>
                </nav>

              <!-- Section -->
                <section>
                  <header class="major">
                    <h2>ADVANCED IOT PROJECTS</h2>
                  </header>
                  <div class="mini-posts">
                    <article>
                      <a href="https://youtu.be/RUO44kqNP24?si=QO3qiHGQLvJSXDaD" class="image"><img src="https://i.ytimg.com/vi/RUO44kqNP24/hqdefault.jpg?sqp=-oaymwEXCNACELwBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLD_wUN6wdxf151rPD6UWSKlwhLK7Q" alt="" /></a>
                      <p>Patient Health Monitoring System Using Raspberry Pi</p>
                    </article>
                    <article>
                      <a href="https://youtu.be/FSqYyjZtH4g?si=9BeVl6KnJ2oD9eBl" class="image"><img src="https://i.ytimg.com/vi/FSqYyjZtH4g/hqdefault.jpg?sqp=-oaymwEbCKgBEF5IVfKriqkDDggBFQAAiEIYAXABwAEG&rs=AOn4CLCztyDAtqgoFMqVVEyold-aKebbbQ" alt="" /></a>
                      <p>Women Safety Device Using Internet of Things</p>
                    </article>
                    <article>
                      <a href="https://youtu.be/EamYfGG4Wvg?si=10C8m2DArmPMSOv3" class="image"><img src="https://i.ytimg.com/vi/EamYfGG4Wvg/hqdefault.jpg?sqp=-oaymwE1CKgBEF5IVfKriqkDKAgBFQAAiEIYAXABwAEG8AEB-AH0CYAC0AWKAgwIABABGGUgTShIMA8=&rs=AOn4CLBlZoYwXKvvyn9fsfvRhCCsItaQ3g" alt="" /></a>
                      <p>A Web-Based Accident Reporting and Tracking System</p>
                    </article>
                  </div>
                  <ul class="actions">
                    <li><a href="https://youtube.com/playlist?list=PL87CgTAGz2yZ0geJ-_9HAK2u8NDMhVwFH&si=cr7ljhFT1B8GZR3-" class="button">More</a></li>
                  </ul>
                </section>

              <!-- Section -->
                <section>
                  <header class="major">
                    <h2>Get in touch</h2>
                  </header>
                  <ul class="contact">
                    <li class="icon solid fa-envelope"><a href="https://sscr.edu/Beta/">https://sscr.edu/Beta/</a></li>
                    <li class="icon solid fa-phone">(046) 431-9405</li>
                    <li class="icon solid fa-home">Manila-Cavite Road, Sta. Cruz,<br />
                    Cavite City, 4100, Philippines</li>
                  </ul>
                </section>

              <!-- Footer -->
                <footer id="footer">
                  <p class="copyright">&copy; SSC-RdC IOT Development Board. <br>All rights reserved.
                </footer>

            </div>
          </div>

      </div>

    <!-- Scripts -->
      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/browser.min.js"></script>
      <script src="assets/js/breakpoints.min.js"></script>
      <script src="assets/js/util.js"></script>
      <script src="assets/js/main.js"></script>
      <script src="assets/js/copy.js"></script>

  </body>
</html>
